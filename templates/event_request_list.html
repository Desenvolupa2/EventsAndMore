{% extends 'base.html' %}
{% block content %}
    {% csrf_token %}

    <h1>Event requests</h1>
    {% regroup events by status_name as events_by_status %}
    {% for status in events_by_status %}
        <h3>{{ status.grouper }}</h3>
        {% for event in status.list %}
            <div>
                <p>Event name: {{ event.event_name }}</p>
                <p>Entity: {{ event.entity }}</p>
                <p>Initial date: {{ event.initial_date }}</p>
                <p>Final date: {{ event.final_date }}</p>
                {% if perms.manager.change_event_request %}
                    <button class="btn btn-primary" onclick="acceptEvent({{ event.id }})">Accept</button>
                    <button class="btn btn-warning" onclick="changeEventDate({{ event.id }})">Change date</button>
                    <button class="btn btn-danger" onclick="denyEvent({{ event.id }})">Deny</button>

                    {% for c_status in all_status %}
                    {% endfor %}
                    <p>----------------------</p>
                {% endif %}
            </div>
        {% endfor %}
    {% endfor %}
{% endblock %}